; Device Shadow Object Definition
; --------------------------------
; This unified structure defines both "desired" (cloud-to-device) and "reported" (device-to-cloud)
; objects in the device shadow. All sections are optional, but if present, they must appear in
; the specified order when decoding the CBOR buffer.
;
; Sections:
; 1. "config": Device configuration parameters.
;    - "update_interval": (optional) A 4-byte unsigned integer (in seconds) specifying:
;                         - In passthrough mode: How often the device samples sensors and sends data to cloud.
;                         - In buffer mode: How often the device sends buffered data to cloud, polls shadow, and checks for FOTA updates.
;                         Valid range: 1 to 4294967295. Values outside this range are decoded but rejected by application.
;    - "sample_interval": (optional) A 4-byte unsigned integer (in seconds) specifying how often the device
;                         samples sensor data in buffer mode. This parameter is ignored in passthrough mode.
;                         Valid range: 1 to 4294967295. Values outside this range are decoded but rejected by application.
;    - "buffer_mode": (optional) A boolean value that controls the storage mode.
;                     true = Buffer mode: Device samples at "sample_interval" and sends data at "update_interval".
;                     false = Passthrough mode: Device samples and sends data at "update_interval" (sample_interval is ignored).
;                     When not present, the device uses the default passthrough mode.
;    - Additional configuration parameters may be included as key-value pairs (tstr => any).
;
; 2. "command": (optional) An array specifying a command for the device to execute.
;    - Structure: [type, id]
;      - type: 4-byte unsigned integer indicating the command type.
;              Supported command types:
;                1 = PROVISION: Triggers device provisioning sequence
;              Valid range: 1 to 1.
;      - id:   4-byte unsigned integer indicating the command ID.
;              Used to track command execution. Increment for successive commands.
;              Valid range: 1 to 4294967295 (excludes 0).
;
; Any additional fields may be included as key-value pairs (tstr => any).

shadow-object = {
    ? "config": {
        ? "update_interval": uint .size 4,
        ? "sample_interval": uint .size 4,
        ? "buffer_mode": bool,

        ? "PTIS": uint .size 2,
        ? "PTAC": uint .size 2,
        ? "PHS": uint .size 2,

        ? "NPS": uint .size 1,
        ? "NAM": uint .size 1,
        ? "NSE": uint .size 1,
        ? "CTM": uint .size 1,

        ? "MGS": uint .size 1,
        ? "GFTS": uint .size 1,
        ? "GFDS": uint .size 1,

        ? "LMS": uint .size 1,
        ? "LTS": uint .size 1,
        ? "LODFM": uint .size 2,
        ? "LODOM": uint .size 2,
        ? "LCONF": uint .size 1,
        ? "GAIH": uint .size 1,
        ? "GAIND": uint .size 1,
        ? "GAOM": uint .size 1,

        ? "TR1": uint .size 4,
        ? "TD1": uint .size 1,
        ? "TI1": uint .size 1,

        ? "TR2": uint .size 4,
        ? "TD2": uint .size 1,
        ? "TI2": uint .size 1,

        ? "TR3": uint .size 4,
        ? "TD3": uint .size 1,
        ? "TI3": uint .size 1,

        ? "TR4": uint .size 4,
        ? "TD4": uint .size 1,
        ? "TI4": uint .size 1,

        ? "TR5": uint .size 4,
        ? "TD5": uint .size 1,
        ? "TI5": uint .size 1,

        ? "TR6": uint .size 4,
        ? "TD6": uint .size 1,
        ? "TI6": uint .size 1,

        ? "TR7": uint .size 4,
        ? "TD7": uint .size 1,
        ? "TI7": uint .size 1,

        ? "TR8": uint .size 4,
        ? "TD8": uint .size 1,
        ? "TI8": uint .size 1,

        * tstr => any
    },
    ? "command": [type: uint .size 4 .ge 1 .le 1, id: uint .size 4 .ge 1 .le 4294967295],
    * tstr => any
}
